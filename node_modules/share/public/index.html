<!DOCTYPE html>
<html>
   <head>
   <head>
   <!--script src="http://ajaxorg.github.com/ace/build/src/ace.js"></script-->  
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
   <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.17/jquery-ui.min.js"></script>
   <script src="/channel/bcsocket.js"></script>
   <script src="/share/share.uncompressed.js"></script>
   <script src="/share/textarea.js"></script>
   <script src="/socket.io/socket.io.js"></script>
   <style type="text/css" media="screen">
     #pad { 
	position: absolute;
	width: 1000px;
	height: 450px;
        top: 100px;
        right: 0;
        bottom: 0;
        left: 150px;
        border:5px solid gray;  
    }   
     #username {
	position: absolute;
	top: 5px;
	right:0;
	bottom:0;
	left:25px;
	font-family:arial;
	font-size:25px;
    }
   </style>
   </head>
   
   <body>
   <script src="/home/vishal/ace-builds/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>  
   <!--div id="editor"> Some text </div-->

   <p id="username"> </p>
   <script>
   // to get the name of the user::
   var nameArray = new Array();
   var count=0;
   var socket = io.connect();
   socket.on('sendall', function (data) {
			   //alert(data.msg);
			   //console.log(data);
		           nameArray = data.msg;
			   count = nameArray.length;
			   //Only 4 members's name will be shown.
			   if(count==1)
			   {
			      document.getElementById("test1").innerHTML=nameArray[0];
			      document.getElementById("test2").innerHTML="";
			      document.getElementById("test3").innerHTML="";
			      document.getElementById("test4").innerHTML="";
			   }
			   else if(count==2)
			   {
			      document.getElementById("test1").innerHTML=nameArray[0];
			      document.getElementById("test2").innerHTML=nameArray[1];
			      document.getElementById("test3").innerHTML="";
			      document.getElementById("test4").innerHTML="";
			   }
			   else if(count==3)
			   {
			      document.getElementById("test1").innerHTML=nameArray[0];
			      document.getElementById("test2").innerHTML=nameArray[1];
			      document.getElementById("test3").innerHTML=nameArray[2];
			      document.getElementById("test4").innerHTML="";
			   }
			   else if(count==4)
			   {
			      document.getElementById("test1").innerHTML=nameArray[0];
			      document.getElementById("test2").innerHTML=nameArray[1];
			      document.getElementById("test3").innerHTML=nameArray[2];
			      document.getElementById("test4").innerHTML=nameArray[3];
			   }
			     /* for(var i=0 ; i<count ;++i) {
			        document.write(nameArray[i]);
 			     } */
  
			   });
   var name = prompt("Enter your name :)");
   if(name!=null) {
	   var display = "Hello " + name;
	   document.getElementById("username").innerHTML=display;
	   socket.emit('message', { user: name});
   }
   </script>

   <br><br><br><br>
   <p> Users online : </p>
   <p id="test1"> </p>
   <p id="test2"> </p>
   <p id="test3"> </p>
   <p id="test4"> </p>
   <br><br><br>
   <script>
  </script>



   <textarea id="pad" rows="8"> </textarea>
       <script>
       $(function() {
//	  var editor = ace.edit("editor");
          var elem = document.getElementById('pad');
          var connection = sharejs.open('blag', 'text', function(error, doc) {
  	     if (error) {
  		console.log(error);
  	     }
	     else {
  	//	elem.disabled = false;
  		doc.attach_textarea(elem);
	//        doc.attach_ace(editor);
  	     }
     });
});

       </script>
   </body>
</html>
